<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Andres Arana | Front-End Developer</title>
    <link rel="stylesheet" type="text/css" href="css/portfolio.css">
    <link rel="stylesheet" type="text/css" href="css/blog.css">

  </head>

  <body>

    <!-- <header id="header" class="flexCentered">
      <div class="mainContainer blockToFlexCentered textAlignCenter">
        <a class="plainLink" href="/">
        <div id="headerTitle" class="inlineBlockToFlexLeft flexibleCol">
            <div id="logo"></div>
            <div id="headerTitleText">
              <p class="boldText">Andres Arana</p>
              <p>Front-End Developer</p>
            </div>
        </div>
        </a>
        <div id="profilesContainer" class="flexibleCol flexCenteredToFlexRight">
          <a href="https://github.com/ajarana" target="_blank">
            <div id="gitHubIcon"></div>
          </a>
          <a class="plainLink" id="resumeLink" href="css/assets/resume/Front-End-Developer-Andres-Arana.pdf" target="_blank">Resume</a>
          <a class="plainLink" id="blogLink" href="/blog.html">Blog</a>
        </div>
      </div>
    </header> -->
    <header id="header" class="flexCentered">
      <div class="mainContainer flexCentered textAlignCenter">
        <div id="titleContainer" class="flexLeft">
          <a class="plainLink col-2-flex" href="/">
          <div id="headerTitle" class="flexLeft col-2-flex">
              <div id="logo"></div>
              <div id="headerTitleText">
                <p class="boldText">Andres Arana</p>
                <p>Front-End Developer</p>
              </div>
          </div>
          </a>
        </div>
        <!-- <div id="profilesContainer" class="col-2-flex flexRight">
          <a href="https://github.com/ajarana" target="_blank">
            <div id="gitHubIcon"></div>
          </a>
          <a class="plainLink" id="resumeLink" href="css/assets/resume/Front-End-Developer-Andres-Arana.pdf" target="_blank">Resume</a>
          <a class="plainLink" id="blogLink" href="/blog.html">Blog</a>
        </div> -->
        <div id="buttonWrapper" class="col-2-flex flexRight">
          <button id="mobileButton">
            <div class="hamburgerIcon"></div>
            <div class="hamburgerIcon"></div>
            <div class="hamburgerIcon"></div>
          </button>
        </div>
        <div id="mobileProfilesContainer" class="col-2-flex">
          <ul id="headerMenu">
            <li id="mobileResume" class="menuItems"><a class="plainLink headerLink" id="resumeLink" href="css/assets/resume/Front-End-Developer-Andres-Arana.pdf" target="_blank">Resume</a>
            </li>
            <li class="menuItems">
              <a class="plainLink headerLink" id="blogLink" href="/blog.html">Blog</a>
            </li>
            <li id="desktopResume" class="menuItems"><a class="plainLink headerLink" id="resumeLink" href="css/assets/resume/Front-End-Developer-Andres-Arana.pdf" target="_blank">Resume</a>
            </li>
            <li class="menuItems">
              <!-- <a class="plainLink headerLink" href="#">CodePen</a> -->
              <!-- <div id="codePenLogo"></div> -->
              <!-- <img src="css/assets/icons/White-Large.png" width="200"> -->
              <svg style="display: none;" xmlns="http://www.w3.org/2000/svg"><symbol id="codepen-logo" viewBox="0 0 120 120"><path class="outer-ring" d="M60.048 0C26.884 0 0 26.9 0 60.048s26.884 60 60 60.047c33.163 0 60.047-26.883 60.047-60.047 S93.211 0 60 0z M60.048 110.233c-27.673 0-50.186-22.514-50.186-50.186S32.375 9.9 60 9.9 c27.672 0 50.2 22.5 50.2 50.186S87.72 110.2 60 110.233z"/><path class="inner-box" d="M97.147 48.319c-0.007-0.047-0.019-0.092-0.026-0.139c-0.016-0.09-0.032-0.18-0.056-0.268 c-0.014-0.053-0.033-0.104-0.05-0.154c-0.025-0.078-0.051-0.156-0.082-0.232c-0.021-0.053-0.047-0.105-0.071-0.156 c-0.033-0.072-0.068-0.143-0.108-0.211c-0.029-0.051-0.061-0.1-0.091-0.148c-0.043-0.066-0.087-0.131-0.135-0.193 c-0.035-0.047-0.072-0.094-0.109-0.139c-0.051-0.059-0.104-0.117-0.159-0.172c-0.042-0.043-0.083-0.086-0.127-0.125 c-0.059-0.053-0.119-0.104-0.181-0.152c-0.048-0.037-0.095-0.074-0.145-0.109c-0.019-0.012-0.035-0.027-0.053-0.039L61.817 23.5 c-1.072-0.715-2.468-0.715-3.54 0L24.34 46.081c-0.018 0.012-0.034 0.027-0.053 0.039c-0.05 0.035-0.097 0.072-0.144 0.1 c-0.062 0.049-0.123 0.1-0.181 0.152c-0.045 0.039-0.086 0.082-0.128 0.125c-0.056 0.055-0.108 0.113-0.158 0.2 c-0.038 0.045-0.075 0.092-0.11 0.139c-0.047 0.062-0.092 0.127-0.134 0.193c-0.032 0.049-0.062 0.098-0.092 0.1 c-0.039 0.068-0.074 0.139-0.108 0.211c-0.024 0.051-0.05 0.104-0.071 0.156c-0.031 0.076-0.057 0.154-0.082 0.2 c-0.017 0.051-0.035 0.102-0.05 0.154c-0.023 0.088-0.039 0.178-0.056 0.268c-0.008 0.047-0.02 0.092-0.025 0.1 c-0.019 0.137-0.029 0.275-0.029 0.416V71.36c0 0.1 0 0.3 0 0.418c0.006 0 0 0.1 0 0.1 c0.017 0.1 0 0.2 0.1 0.268c0.015 0.1 0 0.1 0.1 0.154c0.025 0.1 0.1 0.2 0.1 0.2 c0.021 0.1 0 0.1 0.1 0.154c0.034 0.1 0.1 0.1 0.1 0.213c0.029 0 0.1 0.1 0.1 0.1 c0.042 0.1 0.1 0.1 0.1 0.193c0.035 0 0.1 0.1 0.1 0.139c0.05 0.1 0.1 0.1 0.2 0.2 c0.042 0 0.1 0.1 0.1 0.125c0.058 0.1 0.1 0.1 0.2 0.152c0.047 0 0.1 0.1 0.1 0.1 c0.019 0 0 0 0.1 0.039L58.277 96.64c0.536 0.4 1.2 0.5 1.8 0.537c0.616 0 1.233-0.18 1.77-0.537 l33.938-22.625c0.018-0.012 0.034-0.027 0.053-0.039c0.05-0.035 0.097-0.072 0.145-0.109c0.062-0.049 0.122-0.1 0.181-0.152 c0.044-0.039 0.085-0.082 0.127-0.125c0.056-0.055 0.108-0.113 0.159-0.172c0.037-0.045 0.074-0.09 0.109-0.139 c0.048-0.062 0.092-0.127 0.135-0.193c0.03-0.049 0.062-0.098 0.091-0.146c0.04-0.07 0.075-0.141 0.108-0.213 c0.024-0.051 0.05-0.102 0.071-0.154c0.031-0.078 0.057-0.156 0.082-0.234c0.017-0.051 0.036-0.102 0.05-0.154 c0.023-0.088 0.04-0.178 0.056-0.268c0.008-0.045 0.02-0.092 0.026-0.137c0.018-0.139 0.028-0.277 0.028-0.418V48.735 C97.176 48.6 97.2 48.5 97.1 48.319z M63.238 32.073l25.001 16.666L77.072 56.21l-13.834-9.254V32.073z M56.856 32.1 v14.883L43.023 56.21l-11.168-7.471L56.856 32.073z M29.301 54.708l7.983 5.34l-7.983 5.34V54.708z M56.856 88.022L31.855 71.4 l11.168-7.469l13.833 9.252V88.022z M60.048 67.597l-11.286-7.549l11.286-7.549l11.285 7.549L60.048 67.597z M63.238 88.022V73.14 l13.834-9.252l11.167 7.469L63.238 88.022z M90.794 65.388l-7.982-5.34l7.982-5.34V65.388z"/></symbol></svg>

              <a href="https://codepen.io/ajarana/" target="_blank">
                <svg id="codePenLogo">
                  <use xlink:href="#codepen-logo"></use>
                </svg>
              </a>
            </li>
            <li class="menuItems"><a href="https://github.com/ajarana" target="_blank">
              <div id="gitHubIcon"></div>
            </a>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <main>
      <div id="blog" class="mainContainer">
        <!-- <p data-height="683" data-theme-id="dark" data-slug-hash="vxqJGb" data-default-tab="result" data-user="ajarana" data-embed-version="2" data-pen-title="Good Responsive Canvas (v.2)" class="codepen">See the Pen <a href="http://codepen.io/ajarana/pen/vxqJGb/">Good Responsive Canvas (v.2)</a> by Andres  (<a href="http://codepen.io/ajarana">@ajarana</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script> -->
        <!-- <h1 class="textAlignLeft">Building a Responsive Canvas</h1> -->

        <div id="aWrapper">
        <!--Include some fallback content on the 0.00001% chance your user's browser doesn't support canvas -->
          <a href="http://codepen.io/ajarana/pen/aJgPMR" target="_blank">
          <canvas id="myCanvas">Fallback content</canvas>
          </a>
        </div>

        <h1 class="textAlignLeft">Building a Responsive Canvas</h1>

        <div>
          <!-- <h1 class="textAlignLeft">Building a Responsive Canvas</h1> -->
          <!-- <p class="textAlignCenter">Below is some of the work I've done.</p> -->
        </div>
        <section id="firstBlog">
          <p class="spacedOut">Building a high-quality <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">canvas</a> that's fully compatible with nearly all the various device pixel ratios, screen resolutions, and browsers available isn't an easy task. The main challenges revolve around maintaining the canvas's original aspect ratio in the user's viewport at all times and ensuring the canvas content maintains a high pixel quality.</p>
          <h3>Scaling the canvas: some options</h3>
          <p class="spacedOut">The canvas element becomes cleared of all its contents whenever its width and height attributes are changed. There are several options available for updating the canvas whenever this happens:</p>
          <ol>
            <li class="littleSpacedOut">If you want to draw an image once and scale it, you can store the contents in a temporary canvas using the <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage">CanvasRenderingContext2D.drawImage()</a> method. The original canvas width and height attributes can then be rescaled, and drawImage() called again in order to restore its contents (you could also do away with the temporary canvas if you're not looking to rescale the contents). Here's the <a href="http://codepen.io/ajarana/pen/RpejEj" target="_blank" class="nearlyPlainLink">CodePen</a> showing this option in action.</li>

          <!-- </p> -->
            <li class="littleSpacedOut">Drawing once, and using <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL">HTMLCanvasElement.toDataURL()</a> in order to store the canvas contents in an <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image">Image</a> object instead of a temporary canvas. The original canvas is rescaled, and drawImage can once again be used in order to restore its contents. This option is very similar to the above.</li>
            <li class="littleSpacedOut">Redrawing everything.</li>
          </ol>
          <p class="spacedOut">This last option is the one with the most flexibility. It's really the only way to ensure canvas contents will continue to look sharp on any screen. The first two options will make your canvas's contents look blurry after resizing because the rendering context only draws the actual shape once, afterwards it merely stretches or shrinks an image of that shape on the rescaled canvas.</p>
          <h3>Setting up our canvas</h3>
          <p class="spacedOut">First, we need to create a canvas element that we can then access through JavaScript.</p>
          <pre id="lul" class="darkBackground slightlyRoundedCorners"><code>&lt;<span class="codeRed">div</span> <span class="codeBlue">id</span>=<span class="codeGreen">"aWrapper"</span>&gt;
    <span class="codeGray">&lt;!--Include some fallback content on the 0.00001% chance your user's browser doesn't support canvas --&gt;</span>
    &lt;<span class="codeRed">canvas</span> <span class="codeBlue">id</span>=<span class="codeGreen">"myCanvas"</span>&gt;Fallback content&lt;/<span class="codeRed">canvas</span>&gt;
&lt;/<span class="codeRed">div</span>&gt;</code></pre>
          <p class="spacedOut">Now we need the canvas element to inherit its width and height properties from its parent to allow for downscaling if it's width and height attributes need to be larger than its width and height properties. This will be further explained later (note: the width and height properties here could also be set through JavaScript, but this is more efficient if you want to overlay some UI elements or other canvases for your project).</p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codeBlue">#aWrapper</span> {
    <span class="codeGray">/*Horizontally centers the canvas*/</span>
    margin: <span class="codeOrange">0</span> auto;
}

<span class="codeBlue">#myCanvas</span> {
    <span class="codeGray">/*This eliminates inconsistent rendering across browsers, canvas is supposed to be a block-level element across all browsers anyway*/</span>
    display: block;

    <span class="codeGray">/*myCanvas will inherit its CSS width and style property values from aWrapper*/</span>
    width: <span class="codeOrange">100%</span>;
    height: <span class="codeOrange">100%</span>;
}</code></pre>
          <p class="spacedOut">Then we create some JavaScript variables to reference the necessary elements in our DOM and access the <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">2D rendering context</a> we'll use to draw shapes with.</p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codePurple">var</span> aWrapper = <span class="codeRed">document</span>.<span class="codeTeal">getElementById</span>(<span class="codeGreen">"aWrapper"</span>);
<span class="codePurple">var</span> canvas = <span class="codeRed">document</span>.<span class="codeTeal">getElementById</span>(<span class="codeGreen">"myCanvas"</span>);

<span class="codeGray">//Accesses the 2D rendering context for our canvas</span>
<span class="codePurple">var</span> ctx = <span class="codeRed">canvas</span>.<span class="codeTeal">getContext</span>(<span class="codeGreen">"2d"</span>);</code></pre>
          <p class="spacedOut">Now we just have to actually make the canvas responsive.</p>
          <h3>Maintaining canvas quality across various device pixel ratios</h3>
          <p class="spacedOut">The canvas coordinate space must be rendered according to the <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio">device pixel ratio</a> of the display, otherwise the content will become blurry for any display with a device pixel ratio higher than 1. These displays are often found in mobile and tablet devices, and have more than 1 physical pixel representing every logical pixel. A more in-depth look into this subtopic can be found <a class="nearlyPlainLink" href="https://www.html5rocks.com/en/tutorials/canvas/hidpi/">here</a>.</p>
          <p class="spacedOut">The following will query the device's pixel ratio so that we can use this to alter the coordinate space. You can test this simply by increasing the zoom on Chrome. You'll notice that the canvas coordinate space has larger dimensions than the actual canvas element itself.</p>
          <p class="spacedOut"><span class="red">Warning:</span> A devicePixelRatio with a floating pointer number value won't always be pretty (e.g. <a class="nearlyPlainLink" href="https://mydevice.io/devices/#samsunggalaxys6">Microsoft's Lumia 1520</a> with a 2.5 pixel ratio. Page zoom values on Chrome won't always be sharp either if the resulting pixelRatio is not an integer.)</p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codePurple">function</span> <span class="codeBlue">setCanvasScalingFactor</span>() {
    <span class="codePurple">return</span> <span class="codeRed">window</span>.<span class="codeRed">devicePixelRatio</span> <span class="codeTeal">||</span> <span class="codeOrange">1</span>;
}</code></pre>
          <p class="spacedOut">There is a fallback value of 1 in case the browser does not support the property.</p>
          <h3>Altering the canvas coordinate space</h3>
          <p class="spacedOut">Let's say we need to make sure our canvas maintains a 1:1 aspect ratio after the viewport has been resized. Unfortunately, the easiest approach of resizing the canvas through its CSS properties will result in very blurry canvas content. This is because the width and height properties only determine the size of the canvas element, not the coordinate space on which its content is drawn. The latter can only be changed dynamically by using Javascript to alter the canvas width and height HTML attributes.</p>
          <p class="spacedOut">Now we have some options on how we'll adjust the canvas's coordinate space:</p>
          <ol>
            <li class="littleSpacedOut"><a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth">window.innerWidth</a> and <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth">window.innerHeight</a></li>
            <li class="littleSpacedOut"><a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/outerWidth">window.outerWidth</a> and <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth">window.outerHeight</a></li>
            <li class="littleSpacedOut"><a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Screen/width">window.screen.width</a> and <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth">window.screen.height</a></li>
            <li class="littleSpacedOut"><a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Screen/availWidth">window.screen.availWidth</a> and <a target="_blank" class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth">window.screen.availHeight</a></li>
          </ol>
          <p class="spacedOut">To make a long story short, the most dependable of those 4 combos is the innerWidth/innerHeight pair. As of iOS 10, both window.outerWidth and window.outerHeight return 0 on mobile Safari, Chrome, Firefox, and Opera Mini. These properties are also less useful because they include the whole browser window, rather than just the viewport where elements are actually rendered.</p>
          <p class="spacedOut">Screen.width always returns the same value for iOS devices, whether the screen is in landscape or portrait mode. On Android, however, screen.width is dynamic and will change according to the device's current orientation. The same is true for screen.availWidth and screen.availHeight.</p>
          <p class="spacedOut">So now that we have a reliable way of altering the coordinate space, we can figure out how exactly we'll do that. If the viewport is in portrait mode (window.innerHeight > window.innerWidth), then our limiting factor is the viewport width, so we set our canvas's width relative to the viewport width. If the viewport is in landscape mode (window.innerWidth > window.innerHeight), then the limiting factor is the viewport height, so we set width relative to the viewport height.</p>
          <p class="spacedOut">Feel free to also add in whatever breakpoints you want:</p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codePurple">function</span> <span class="codeBlue">resizeCanvas</span>() {
    <span class="codeGray">//Gets the devicePixelRatio</span>
    <span class="codePurple">var</span> pixelRatio = <span class="codeBlue">setCanvasScalingFactor</span>();

    <span class="codeGray">//The viewport is in portrait mode, so var width should be based off viewport WIDTH</span>
    <span class="codePurple">if</span> (<span class="codeRed">window</span>.<span class="codeRed">innerHeight</span> <span class="codeTeal">></span> <span class="codeRed">window</span>.<span class="codeRed">innerWidth</span>) {
        <span class="codeGray">//Makes the canvas 100% of the viewport width</span>
        <span class="codePurple">var</span> width = <span class="codeYellow">Math</span>.<span class="codeTeal">round</span>(<span class="codeOrange">1.0</span> <span class="codeTeal">*</span> <span class="codeRed">window</span>.<span class="codeRed">innerWidth</span>);
    }
  <span class="codeGray">//The viewport is in landscape mode, so var width should be based off viewport HEIGHT</span>
    <span class="codePurple">else</span> {
        <span class="codeGray">//Makes the canvas 100% of the viewport height</span>
        <span class="codePurple">var</span> width = <span class="codeYellow">Math</span>.<span class="codeTeal">round</span>(<span class="codeOrange">1.0</span> <span class="codeTeal">*</span> <span class="codeRed">window</span>.<span class="codeRed">innerHeight</span>);
    }

    <span class="codeGray">//This is done in order to maintain the 1:1 aspect ratio, adjust as needed</span>
    <span class="codePurple">var</span> height = width;

    <span class="codeGray">//This will be used to downscale the canvas element when devicePixelRatio > 1</span>
    <span class="codeRed">aWrapper</span>.<span class="codeRed">style</span>.<span class="codeRed">width</span> <span class="codeTeal">=</span> width <span class="codeTeal">+</span> <span class="codeGreen">"px"</span>;
    <span class="codeRed">aWrapper</span>.<span class="codeRed">style</span>.<span class="codeRed">height</span> <span class="codeTeal">=</span> height <span class="codeTeal">+</span> <span class="codeGreen">"px"</span>;

    <span class="codeGray">//pixelRatio will be either an integer or floating point number</span>
    <span class="codeRed">canvas</span>.<span class="codeRed">width</span> <span class="codeTeal">=</span> width <span class="codeTeal">*</span> pixelRatio;
    <span class="codeRed">canvas</span>.<span class="codeRed">height</span> <span class="codeTeal">=</span> height <span class="codeTeal">*</span> pixelRatio;
}</code></pre>
          <p class="spacedOut"><a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round">Math.round</a> (only useful for when you don't want the canvas to be 100% of the viewport height/width) is used on var width because floating point numbers are not a reliable way of drawing pixel-perfect canvas content. The resizing transitions might not be as smooth, but a few miniscule jumps is well worth high canvas content quality. </p>
          <h3>Drawing some shapes</h3>
          <p class="spacedOut">This function draws some rectangles to help show the responsive canvas in action. At the end, we use the <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame">window.requestAnimationFrame</a> method. This allows the browser to call your draw function before its next repaint, with whatever frequency it deems appropriate. As a result, this option is preferable to the  <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval">window.setInterval()</a> method of updating a canvas. </p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codeGray">//To make dynamic colors</span>
<span class="codePurple">var</span> cascadeFactor <span class="codeTeal">=</span> <span class="codeOrange">255</span>;
<span class="codePurple">var</span> cascadeCoefficient <span class="codeTeal">=</span> <span class="codeOrange">1</span>;

<span class="codePurple">function</span> <span class="codeBlue">draw</span>() {
    <span class="codeGray">//The number of color block columns and rows</span>
    <span class="codePurple">var</span> columns <span class="codeTeal">=</span> <span class="codeOrange">5</span>;
    <span class="codePurple">var</span> rows <span class="codeTeal">=</span> <span class="codeOrange">5</span>;
    <span class="codeGray">//The length of each square</span>
    <span class="codePurple">var</span> length <span class="codeTeal">=</span> <span class="codeYellow">Math</span>.<span class="codeTeal">round</span>(<span class="codeRed">canvas</span>.<span class="codeRed">width</span></span><span class="codeTeal">/</span>columns) <span class="codeTeal">-</span> <span class="codeOrange">2</span>;

    <span class="codeGray">//Increments or decrements cascadeFactor by 1, based on cascadeCoefficient</span>
    cascadeFactor <span class="codeTeal">+=</span> cascadeCoefficient;

    <span class="codeGray">//Makes sure the canvas is clean at the beginning of a frame</span>
    <span class="codeRed">ctx</span>.<span class="codeBlue">clearRect</span>(<span class="codeOrange">0</span>, <span class="codeOrange">0</span>, <span class="codeRed">canvas</span>.<span class="codeRed">width</span>, <span class="codeRed">canvas</span>.<span class="codeRed">height</span>);

    <span class="codePurple">for</span> (<span class="codePurple">var</span> i<span class="codeTeal"> = </span>columns; i <span class="codeTeal">>=</span> <span class="codeOrange">1</span>; i<span class="codeTeal">--</span>) {
      <span class="codePurple">for</span> (<span class="codePurple">var</span> j<span class="codeTeal"> = </span>rows; j <span class="codeTeal">>=</span> <span class="codeOrange">1</span>; j<span class="codeTeal">--</span>) {
        <span class="codeGray">//Where the color magic happens</span>
        <span class="codeRed">ctx</span>.<span class="codeBlue">fillStyle</span> <span class="codeTeal">=</span> <span class="codeGreen">"rgba("</span> <span class="codeTeal">+</span> j<span class="codeTeal">*</span>i<span class="codeTeal">*</span>(cascadeFactor<span class="codeTeal">-</span><span class="codeOrange">110</span>)<span class="codeTeal"> + </span><span class="codeGreen">","</span><span class="codeTeal"> + </span>i<span class="codeTeal">*</span>cascadeFactor<span class="codeTeal"> + </span><span class="codeGreen">","</span><span class="codeTeal"> + </span>j<span class="codeTeal">*</span>cascadeFactor <span class="codeTeal">+</span> <span class="codeGreen">","</span> <span class="codeTeal"> + </span><span class="codeOrange">0.6</span><span class="codeTeal"> + </span><span class="codeGreen">")"</span>;

        <span class="codeRed">ctx</span>.<span class="codeBlue">fillRect</span>((length<span class="codeTeal">*</span>(i<span class="codeTeal">-</span><span class="codeOrange">1</span>)) <span class="codeTeal">+</span> ((i<span class="codeTeal">-</span><span class="codeOrange">1</span>)<span class="codeTeal">*</span><span class="codeOrange">2</span>), (length<span class="codeTeal">*</span>(j<span class="codeTeal">-</span><span class="codeOrange">1</span>)) <span class="codeTeal">+</span> ((j<span class="codeTeal">-</span><span class="codeOrange">1</span>)<span class="codeTeal">*</span><span class="codeOrange">2</span>), length, length);
       }
    }

    <span class="codePurple">if</span> (cascadeFactor <span class="codeTeal">></span> <span class="codeOrange">275</span> <span class="codeTeal">||</span> cascadeFactor <span class="codeTeal"><</span> <span class="codeOrange">0</span>) {
      <span class="codeGray">//Resets the color cascade</span>
      cascadeCoefficient <span class="codeTeal">=</span> <span class="codeTeal">-</span>cascadeCoefficient;
    }

    <span class="codeGray">//Continuously calls draw() again until cancelled</span>
    <span class="codePurple">var</span> someID <span class="codeTeal">=</span> <span class="codeRed">window</span>.<span class="codeBlue">requestAnimationFrame</span>(draw);
}</code></pre>
          <p class="spacedOut">Setting an ID for the request allows for canceling later using <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame">window.cancelAnimationFrame()</a>.</p>
          <h3>Listening for the changes to our viewport</h3>
          <p class="spacedOut">The most dependable way to listen for updates to window.innerWidth and window.innerHeight is to use: </p>
          <pre class="darkBackground slightlyRoundedCorners"><code><span class="codeRed">window</span>.<span class="codeTeal">addEventListener</span>(<span class="codeGreen">"resize"</span>, resizeCanvas, <span class="codeOrange">false</span>);

<span class="codeGray">//Called once so everything renders correctly on load time</span>
<span class="codeBlue">resizeCanvas</span>();
<span class="codeBlue">draw</span>();</code></pre>
          <p class="spacedOut">Events such as <a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/Events/orientationchange">orientationchange</a> can also be used for mobile and tablet devices, but they're unreliable across browsers. For example, window.innerWidth and window.outerWidth will update properly by the time orientationchange ends on Safari in iOS 10, but they will not update properly on Firefox, Chrome, or Opera Mini.</p>

          <h3>Conclusion</h3>
          <p class="spacedOut">Putting it all together we get something like this:  </p>
          <ul>
            <li class="littleSpacedOut"><a class="nearlyPlainLink" href="http://codepen.io/ajarana/full/EWOwpp/">CodePen (Full page)</a></li>
            <li class="littleSpacedOut"><a class="nearlyPlainLink" href="http://codepen.io/ajarana/pen/EWOwpp/?editors=1111">CodePen (Editor view)</a></li>
          </ul>
          <p class="spacedOut">Whenever the viewport changes, the canvas will continue to redraw itself using its new width and height variables, and will also check to see if devicePixelRatio has changed.</p>
          <p class="spacedOut">We end up with a responsive canvas capable of handling nearly all device pixel ratios, browsers, and platforms.</p>
          <h3 id="credits">Credits</h3>
          <p><a class="nearlyPlainLink" href="https://www.html5rocks.com/en/tutorials/canvas/hidpi/">High DPI Canvas</a></p>
          <p><a class="nearlyPlainLink" href="https://www.html5rocks.com/en/tutorials/casestudies/gopherwoord-studios-resizing-html5-games/">Case Study: Auto-Resizing HTML5 Games</a></p>
          <p><a class="nearlyPlainLink" href="http://stackoverflow.com/questions/3543358/resizing-a-html-canvas-blanks-its-contents">Resizing a HTML canvas blanks its contents</a></p>
          <p><a class="nearlyPlainLink" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">Canvas Tutorial</a></p>
          <br>
          <p class="spacedOut lightGray"><i>Posted on March 31, 2017</i></p>
        </section>

        <!-- <section id="projectSection">
          <h1 id="projectHeader" class="normalText">Projects</h1>

          <div id="agameSectionContainer" class="flexCenteredToFlexTopLeft flexWrapThenNoWrap sectionContainer">

              <div class="imageHolder">
                <a target="_blank" class="nearlyPlainLink" id="firstImage" class="images" href="http://ajarana.github.io/agame/" target="_blank"></a>
            </div>

            <div class="listContainer">
              <h2 class="boldText sectionHeaders"><a target="_blank" class="nearlyPlainLink" class="plainLink" href="http://ajarana.github.io/agame/" target="_blank">Agame</a></h2>
              <ul class="noPadding">
                <li class="bulletPoints">Responsive Design</li>
                <li class="bulletPoints">High DPI Compatible Canvas</li>
                <li class="bulletPoints">Native JavaScript</li>
                <li class="bulletPoints">LESS Preprocessor</li>
                <li class="bulletPoints">HTML5</li>
              </ul>
            </div>
          </div>

          <div class="border"></div>
          <div id="mixtinSectionContainer" class="flexCenteredUp flexWrapThenNoWrap sectionContainer">
            <div class="imageHolder">
              <a target="_blank" class="nearlyPlainLink" id="secondImage" class="images" href="http://ajarana.github.io/mixtin/" target="_blank"></a>
            </div>

            <div class="listContainer">
              <h2 class="boldText sectionHeaders"><a target="_blank" class="nearlyPlainLink" class="plainLink" href="http://ajarana.github.io/mixtin/" target="_blank">Mixtin</a></h2>
              <ul class="noPadding">
                <li class="bulletPoints">Responsive Design</li>
                <li class="bulletPoints">Website Design</li>
                <li class="bulletPoints">Booststrap 3</li>
                <li class="bulletPoints">LESS Preprocessor</li>
                <li class="bulletPoints">HTML5</li>
              </ul>
            </div>
          </div>
        </section> -->
      </div>
    </main>

    <footer id="footer" class="flexCentered">
      <div class="mainContainer textAlignCenter">
        <p class="noMargin lightGray">Contact Me</p>
        <div id="contact">
          <a class="plainLink" href="mailto:ajoelarana@gmail.com">ajoelarana@gmail.com</a>
        </div>
        <!-- <div id="copyRight">	&copy; 2017 Andres Arana</div> -->
      </div>
    </footer>

    <script type="text/javascript" src="js/mobileMenu.js"></script>
    <script type="text/javascript" src="js/responsiveCanvas.js"></script>

  </body>
</html>
